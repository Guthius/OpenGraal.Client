GR-V1.03OµæÊ◊‚2BÓ≈=à'ÿZ[skÒ
Y°∑ˆ¬ûƒ|≠Ø˘5ÅxÑå–_É{qœ‚	∂÷÷‹ö@ºBVË≠ÅΩ∞gÒ_Îk~M !#Ù◊‡^‹≥ÅxÇ≠µ5∑&Øêzk`/ÏŸ@<¡◊˙ö_àG»˝5∏˜l û`kmÕ≠	ƒ+dÖﬁÿ{6OµæÊ◊‚2BÓ≈=à'ÿZ[skÒ
Y°∑ˆ¬ûƒ|≠Ø˘5ÅxÑå–_É{qœ‚	∂÷÷‹ö@ºBVË≠ÅΩ∞gÒ_Îk~M !#Ù◊‡^‹≥ÅxÇ≠µ5∑&Øêzk`/ÏŸ@<¡◊˙ö_àG»˝5∏˜l û`kmÕ≠	ƒ+dÖﬁÿ{6OµæÊ◊‚2BÓ≈=à'ÿZ[skÒ
Y°∑ˆ¬ûƒ|≠Ø˘5ÅxÑå–_É{qœ‚	∂÷÷‹ö@ºBVË≠ÅΩ∞gÒ_Îk~M !#Ù◊‡^‹≥ÅxÇ≠µ5∑&Øêzk`/ÏŸ@<¡◊˙ö_àG»˝5∏˜l û`kmÕ≠	ƒ+dÖﬁÿ{6OµæÊ◊‚2BÓ≈=à'ÿZ[skÒ
Y°∑ˆ¬ûƒ|≠Ø˘5ÅxÑå–_É{qœ‚	∂÷÷‹ö@ºBVË≠ÅΩ∞gÒ_Îk~M !#Ù◊‡^‹≥ÅxÇ≠µ5∑&Øêzk`/ÏŸ@<¡◊˙ö_àG»˝5∏˜T û0à"o‰Òµ∂Ê÷‚≤BoÏ	@ëWGû»yO∞5¨fgûÃõy~M !#Ù◊¢Ãõy2O´Ö=à'¯Z_ÛkQËΩÅhÖÆêAzCOË¡Ω∏«Ò[kknÌ!°#Ù÷¿^ÿ„ÄxÇØı5øˆ≠–˙kp/Óq@<¡÷⁄ö[{àFËΩ5∞ˆ8 û‡k}ÕØ=D+tÖ˛‹ã{O∞µ∂Ê÷¢:BoÏÖ=à'¯Z_Ûk—
]°ø˜‚ƒl≠≠πµáhÑé–[{aè‚	æ÷◊¸⁄C¥BWËØ¡Ω∏«Ò[kknÌ!°#Ù÷¿^ÿ„ÄxÇØı5øˆ≠–˙kp/Óq@<¡÷⁄ö[SàFË!‰ ±CvxG»°∑ˆ¬ƒ|≠Ø˘5ÖhÖÆêBq(ÖÕpÖ¨–˙kp/Óq@<¡÷⁄ö[SàFË!‹ ÖÇTXG»°∑ˆ¬ƒ|≠Ø˘5ÖhÖÆêBq(ÖÕpÖ¨–˙kp/Óq@<¡÷⁄ö[SàFË!‹ ÖÇTXG»°∑ˆ¬ƒ|≠Ø˘5ÖhÖÆêJ3dÜ‹pÖ¨–˙kp/Óq@<¡÷⁄ö[{àFËΩ5∞ˆ8 û‡k}ÕØ=D+tÖ˛‹ã{O∞µ∂Ê÷¢:BoÏÖ=à'¯Z_Ûk—
]°ø˜‚ƒl≠≠πµáhÑé–[{aè‚	æ÷◊¸⁄C¥BWËØ¡Ω∏«Ò[kknÌ!°#Ù÷¿^ÿ„ÄxÇØı5øˆ≠–˙kp/Óq@<¡÷⁄ö[{àFËΩ5∞ˆ8 û‡k}ÕØ=D+tÖ˛‹ã{O∞µ∂ßû‘{aè‚	æñ’ ‚ÿ{[-Óu@<Âﬁ‹Çx¬‚	tyhmqueen2sil.graal 31 0 4 1 playerx 61
#
Stop!\Ouch!\
!Stop!\Ouch!\
ˇˇˇ
;I#if (playerenters) {ß  stopmidi;ß  nowarp=1;ß  setbackpal grayscale.gif;ß  setletters grayletters.png;ß}ß
<@#// Graal v1.3 NPC by Stefan Knorrßif (created) {ß  showcharacter;ß  setcharprop #3,head279.gif;ß  setcharprop #C0,orange;ß  setcharprop #C1,blue;ß  setcharprop #C2,white;ß  setcharprop #C3,darkblue;ß  setcharprop #C4,white;ß  setcharprop #n,OwL;ß  setcharprop #2,rdshield.gif;ß  setcharprop #1,goldedge.gif;ß  shieldpower = 1;ß  dir = 2;ß  swordpower = 1;ß  hurtdx = 0;ß  hurtdy = 0;ß  hearts = 3;ß  ap=5;ß}ßif (playerenters || wasthrown) {ß  if(isleader){ß    shimy1dead=0;ß    hearts=3;ß    this.mode = 0;ß    sprite=0;ß    x=28;ß    y=32;ß  }ß  message;ß  this.huntspeed = 0.4;ß  dirgo = {0,-1,-1,0,0,1,1,0};ß  timeout = 0.05;ß  if (hearts<=0) {ß    this.mode = 5; // RESPAWNß    this.runcounter = 0;ß    timeout = 5;ß  } else {ß    this.mode = 0;ß    this.runcounter = int(random(10,40));ß  }ß}ßß// Sword attacking stuffßif (timeout && (this.mode==0 || this.mode==2)) {ß  // look for playersß  mindist = 1000;ß  for (i=0; i<playerscount; i++)ß      if (players[i].hearts>0 && players[i].id>=0) {ß    dx = players[i].x - x;ß    dy = players[i].y - y;ß    if (abs(dx)>abs(dy)) {ß      if (dx>0) pdir=3; else pdir=1;ß    } else {ß      if (dy>0) pdir=2; else pdir=0;ß    }ß    if (pdir==dir) {ß      dist = (dx*dx+dy*dy)^0.5;ß      if (dist<mindist) {ß        cansee = 1;ß        if (abs(dx)>abs(dy)) k = int(abs(dx));ß        else k = int(abs(dy));ß        for (j=0; j<=k-2; j++)ß          if (onwall(x+1.5+dx*j/k,y+2+dy*j/k)) cansee = 0;ß        if (cansee!=0) {ß          mindist = dist;ß          aimplayer = i;ß        }ß      }ß    }ß  }ß  if (mindist<=3) {ß    this.runcounter = 0;ß    this.mode = 3; // SLAYINGß    sprite = 9;ß    timeout = 0.05;ß  } else if (mindist<20) {ß    if (this.mode!=2) message Stop!;ß    this.runcounter = 100;ß    this.mode = 2; // HUNTINGß  } else timeout = 0.05;ß}ßif (timeout && this.mode==3) { // SLAYINGß  this.runcounter++;ß  if (this.runcounter>4) {ß    this.runcounter = 100;ß    this.mode = 2; // HUNTINGß    sprite = 0;ß  } else {ß    sprite = 9+this.runcounter;ß  }ß  message;ß  timeout = 0.05;ß}ßif (timeout && this.mode==2) { // HUNTINGß  sprite = (sprite%8)+1;ß  this.runcounter--;ß  if (this.runcounter>0 && aimplayer<playerscount) {ß    dx = players[aimplayer].x-x;ß    dy = players[aimplayer].y-y;ß    if (abs(dx)>abs(dy)) {ß      if (dx>0) dir=3; else dir=1;ß    } else {ß      if (dy>0) dir=2; else dir=0;ß    }ß    len = (dx*dx+dy*dy)^0.5;ß    addx = (dx/len)*this.huntspeed;ß    addy = (dy/len)*this.huntspeed;ß    testx = x + 1.5 + dirgo[dir*2];ß    testy = y + 2+ dirgo[dir*2+1];ß    if (!onwall(testx+addx,testy+addy)) {ß      x += addx;ß      y += addy;ß   } else if (!onwall(testx+addx,testy)) x += addx;ß    else if (!onwall(testx,testy+addy)) y += addy;ß  } else {ß    this.mode = 0; // WALKINGß    this.walkmode = 1; // RANDOMß    this.runcounter = int(random(10,40));ß    sprite = 0;ß    dir = (dir+2)%4;ß    message;ß  }ß  timeout = 0.05;ß}ßß// Hurting stuffßif (washit && this.mode!=1 && hearts>0) {ß  dx = x-playerx;ß  dy = y-playery;ß  len = (dx*dx+dy*dy)^0.5;ß  hurtdx = dx/len;ß  hurtdy = dy/len;ß  sprite = 39;ß  hearts -= playerswordpower/2;ß}ßif ((exploded || waspelt || wasshot) &&ß    this.mode!=1 && hearts>0 && isleader) {ß  hurtdx = -dirgo[dir*2]*0.2;ß  hurtdy = -dirgo[dir*2+1]*0.2;ß  sprite = 39;ß  if (peltwithsign || peltwithvase || peltwithstone || peltwithnpc) hearts -= 1;ß  else if (peltwithblackstone) hearts -= 1.5;ß  else hearts -= 0.5;ß}ßif ((hurtdx!=0 || hurtdy!=0) && isleader) {ß  this.hurtdx = hurtdx;ß  this.hurtdy = hurtdy;ß  hurtdx = 0;ß  hurtdy = 0;ß  this.mode = 1; // HURTEDß  this.runcounter = 20;ß  sprite = 39;ß  if (hearts<=0) {ß    this.mode = 4; // DYINGß    this.runcounter = 24;ß    sprite = 0;ß  }ß  timeout = 0.05;ß}ßif (timeout && this.mode==1) { // HURTEDß  this.runcounter--;ß  if (this.runcounter>10) {ß    testx = x + 1.5 + this.hurtdx*2;ß    testy = y + 2+ this.hurtdy*2;ß    if (!onwall(testx,testy)) {ß      x += this.hurtdx;ß      y += this.hurtdy;ß    }ß  }ß  if (this.runcounter<=0) {ß    if (swordpower>0) this.mode = 2; // HUNTINGß    else this.mode = 0; // WALKINGß    this.runcounter = 100;ß    sprite = 0;ß  }ß  timeout = 0.05;ß}ßif (timeout && this.mode==4) { // DYINGß  if (this.runcounter>0) {ß    message;ß    if ((this.runcounter%2)==0) dir = (dir+3)%4;ß    this.runcounter--;ß    if (this.runcounter<=0) {ß      sprite = 40;ß      play compudead.wav;ß      shimy1dead=1;ß      i = random(0,100);ß      if (i<10) lay greenrupee;ß      else if (i<15) lay bluerupee;ß      else if (i<30) lay heart;ß    } else timeout = 0.05;ß  }ß}ßif (sprite=40 && hearts>0) {ß  this.mode = 0;ß  this.runcounter = int(random(10,40));ß  timeout  = 0.05;ß  hearts = 3;ß  sprite = 0;ß}
C@#// Graal v1.3 NPC by Stefan Knorrßif (created) {ß  showcharacter;ß  setcharprop #3,head279.gif;ß  setcharprop #C0,orange;ß  setcharprop #C1,blue;ß  setcharprop #C2,white;ß  setcharprop #C3,darkblue;ß  setcharprop #C4,white;ß  setcharprop #n,911;ß  setcharprop #2,rdshield.gif;ß  setcharprop #1,goldedge.gif;ß  shieldpower = 1;ß  dir = 2;ß  swordpower = 1;ß  hurtdx = 0;ß  hurtdy = 0;ß  hearts = 3;ß  ap=10;ß}ßif (playerenters || wasthrown) {ß  if(isleader){ß    shimy2dead=0;ß    hearts=3;ß    this.mode = 0;ß    sprite=0;ß    x=35;ß    y=32;ß  }ß  message;ß  this.huntspeed = 0.4;ß  dirgo = {0,-1,-1,0,0,1,1,0};ß  timeout = 0.05;ß  if (hearts<=0) {ß    this.mode = 5; // RESPAWNß    this.runcounter = 0;ß    timeout = 5;ß  } else {ß    this.mode = 0;ß    this.runcounter = int(random(10,40));ß  }ß}ßß// Sword attacking stuffßif (timeout && (this.mode==0 || this.mode==2)) {ß  // look for playersß  mindist = 1000;ß  for (i=0; i<playerscount; i++)ß      if (players[i].hearts>0 && players[i].id>=0) {ß    dx = players[i].x - x;ß    dy = players[i].y - y;ß    if (abs(dx)>abs(dy)) {ß      if (dx>0) pdir=3; else pdir=1;ß    } else {ß      if (dy>0) pdir=2; else pdir=0;ß    }ß    if (pdir==dir) {ß      dist = (dx*dx+dy*dy)^0.5;ß      if (dist<mindist) {ß        cansee = 1;ß        if (abs(dx)>abs(dy)) k = int(abs(dx));ß        else k = int(abs(dy));ß        for (j=0; j<=k-2; j++)ß          if (onwall(x+1.5+dx*j/k,y+2+dy*j/k)) cansee = 0;ß        if (cansee!=0) {ß          mindist = dist;ß          aimplayer = i;ß        }ß      }ß    }ß  }ß  if (mindist<=3) {ß    this.runcounter = 0;ß    this.mode = 3; // SLAYINGß    sprite = 9;ß    timeout = 0.05;ß  } else if (mindist<20) {ß    if (this.mode!=2) message Stop!;ß    this.runcounter = 100;ß    this.mode = 2; // HUNTINGß  } else timeout = 0.05;ß}ßif (timeout && this.mode==3) { // SLAYINGß  this.runcounter++;ß  if (this.runcounter>4) {ß    this.runcounter = 100;ß    this.mode = 2; // HUNTINGß    sprite = 0;ß  } else {ß    sprite = 9+this.runcounter;ß  }ß  message;ß  timeout = 0.05;ß}ßif (timeout && this.mode==2) { // HUNTINGß  sprite = (sprite%8)+1;ß  this.runcounter--;ß  if (this.runcounter>0 && aimplayer<playerscount) {ß    dx = players[aimplayer].x-x;ß    dy = players[aimplayer].y-y;ß    if (abs(dx)>abs(dy)) {ß      if (dx>0) dir=3; else dir=1;ß    } else {ß      if (dy>0) dir=2; else dir=0;ß    }ß    len = (dx*dx+dy*dy)^0.5;ß    addx = (dx/len)*this.huntspeed;ß    addy = (dy/len)*this.huntspeed;ß    testx = x + 1.5 + dirgo[dir*2];ß    testy = y + 2+ dirgo[dir*2+1];ß    if (!onwall(testx+addx,testy+addy)) {ß      x += addx;ß      y += addy;ß   } else if (!onwall(testx+addx,testy)) x += addx;ß    else if (!onwall(testx,testy+addy)) y += addy;ß  } else {ß    this.mode = 0; // WALKINGß    this.walkmode = 1; // RANDOMß    this.runcounter = int(random(10,40));ß    sprite = 0;ß    dir = (dir+2)%4;ß    message;ß  }ß  timeout = 0.05;ß}ßß// Hurting stuffßif (washit && this.mode!=1 && hearts>0) {ß  dx = x-playerx;ß  dy = y-playery;ß  len = (dx*dx+dy*dy)^0.5;ß  hurtdx = dx/len;ß  hurtdy = dy/len;ß  sprite = 39;ß  hearts -= playerswordpower/2;ß}ßif ((exploded || waspelt || wasshot) &&ß    this.mode!=1 && hearts>0 && isleader) {ß  hurtdx = -dirgo[dir*2]*0.2;ß  hurtdy = -dirgo[dir*2+1]*0.2;ß  sprite = 39;ß  if (peltwithsign || peltwithvase || peltwithstone || peltwithnpc) hearts -= 1;ß  else if (peltwithblackstone) hearts -= 1.5;ß  else hearts -= 0.5;ß}ßif ((hurtdx!=0 || hurtdy!=0) && isleader) {ß  this.hurtdx = hurtdx;ß  this.hurtdy = hurtdy;ß  hurtdx = 0;ß  hurtdy = 0;ß  this.mode = 1; // HURTEDß  this.runcounter = 20;ß  sprite = 39;ß  if (hearts<=0) {ß    this.mode = 4; // DYINGß    this.runcounter = 24;ß    sprite = 0;ß  }ß  timeout = 0.05;ß}ßif (timeout && this.mode==1) { // HURTEDß  this.runcounter--;ß  if (this.runcounter>10) {ß    testx = x + 1.5 + this.hurtdx*2;ß    testy = y + 2+ this.hurtdy*2;ß    if (!onwall(testx,testy)) {ß      x += this.hurtdx;ß      y += this.hurtdy;ß    }ß  }ß  if (this.runcounter<=0) {ß    if (swordpower>0) this.mode = 2; // HUNTINGß    else this.mode = 0; // WALKINGß    this.runcounter = 100;ß    sprite = 0;ß  }ß  timeout = 0.05;ß}ßif (timeout && this.mode==4) { // DYINGß  if (this.runcounter>0) {ß    message;ß    if ((this.runcounter%2)==0) dir = (dir+3)%4;ß    this.runcounter--;ß    if (this.runcounter<=0) {ß      sprite = 40;ß      play compudead.wav;ß      shimy2dead=1;ß      i = random(0,100);ß      if (i<10) lay greenrupee;ß      else if (i<15) lay bluerupee;ß      else if (i<30) lay heart;ß    } else timeout = 0.05;ß  }ß}ßif (sprite=40 && hearts>0) {ß  this.mode = 0;ß  this.runcounter = int(random(10,40));ß  timeout  = 0.05;ß  hearts = 3;ß  sprite = 0;ß}
??goldenbush.gif#if(washit&&shimy1dead==1&&shimy2dead==1){ß  putleaps 0,x,y;ß  hide;ß  dontblock;ß}ßif(playerenters&&isleader){ß  show;ß  blockagain;ß}
A?goldenbush.gif#if(washit&&shimy1dead==1&&shimy2dead==1){ß  putleaps 0,x,y;ß  hide;ß  dontblock;ß}ßif(playerenters&&isleader){ß  show;ß  blockagain;ß}
#
#
